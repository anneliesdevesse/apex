// Will be appended to spin.js generated by SPIN interface

function getStimuli() {
    r = "";
    for (i = 0; i < speechmaterial[targetlist].length; ++i) {
        file = speechmaterial[targetlist][i].uri;
        r = r +
            xml.tag(
                "stimulus",
                {
                  "id" : "stimulus_" + prefix + speechmaterial[targetlist][i].id
                },
                xml.tag(
                    "datablocks", xml.tag("sequential", xml.tag("datablock", {
                        "id" : "datablock_silence"
                    }) + xml.tag("datablock", {
                        "id" : "datablock_" + prefix +
                                   speechmaterial[targetlist][i].id
                    }) + xml.tag("datablock", {"id" : "datablock_silence"}))) +
                    xml.tag("fixedParameters",
                            xml.tag("parameter", {"id" : "sentence"},
                                    speechmaterial[targetlist][i].text)));
    }
    return r;
}

function getDatablocks() {
    r = "";
    for (i = 0; i < speechmaterial[targetlist].length; ++i) {
        file = speechmaterial[targetlist][i].wav;
        r = r +
            xml.datablock("datablock_" + prefix +
                              speechmaterial[targetlist][i].id,
                          "soundcard", speechmaterial[targetlist][i].uri);
    }
    return r;
}

function getTrials() {
    r = "";
    for (i = 0; i < speechmaterial[targetlist].length; ++i) {
        file = speechmaterial[targetlist][i].wav;
        r = r +
            xml.trial(
                "trial_" + prefix + speechmaterial[targetlist][i].id,
                targetscreen, xml.tag("stimulus", {
                    id : "stimulus_" + prefix + speechmaterial[targetlist][i].id
                }),
                "correct");
    }
    return r;
}
